<canvas id="canvas" style="boarder:1px solid #000000" cursor="none">
	Your browser does not support canvas element
</canvas>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.js"></script>
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script src="client/Emitter.js"></script>
<script src="client/gameWindow.js"></script>
<script src="client/point.js"></script>
<script src="client/game.js"></script>
<script>
	console.log('index.html: init')

	document.body.style.backgroundColor = 'black'

	var index = {
		init: function() {
			window.socket = io()

			for (var i in index.rcv) {
				socket.on(i, index.rcv[i])
			}
			for (var i in index.action) {
				window[i] = index.action[i]
			}

			socket.emit('handShake', {
				name: prompt('What is your name?', 'Johnny Appleseed')
			})
		},
		action: {
			zero: function() {
				mg.shift = pt.zero()
			},
			brushSize: function(i) {
				if (i > mg.maxBrushSize) {
					mg.brushSize = mg.maxBrushSize
				} else if (i < mg.minBrushSize) {
					mg.brushSize = mg.minBrushSize
				} else {
					mg.brushSize = i
				}
			},
			reset: function() {
				socket.emit('reset')
			},
			clear: function() {
				socket.emit('clear')
			},
			save: function() {
				socket.emit('save')
			},
			msg: function(msg) {
				socket.emit('msg', msg)
			},
			kill: function() {
				socket.emit('kill')
			},
			status: function(cell) {
				socket.emit('status', mg.status.observe(cell))
			}
		},
		rcv: {
			handShake: function(data) {
				socket.id = data.id
				socket.name = data.name
				console.log(`id: ${socket.id}, name: ${socket.name}`)
				gameWindow.tick(gameWindow, index, mg.init, mg.tick)
				mg.status.action(data.status)
			},
			clear: mg.clear,
			msg: console.log,
			kill: function() {
				console.log('leaving server...')
				socket.destroy()
			},
			status: mg.status.action
		}
	}
	index.init()
</script>
