<canvas id="canvas" style="boarder:1px solid #000000" cursor="none">
	Your browser does not support canvas element
</canvas>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.js"></script>
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script src="client/Emitter.js"></script>
<script src="client/gameWindow.js"></script>
<script src="client/point.js"></script>
<script src="client/game.js"></script>
<script>
	console.log('index.html: init')

	document.body.style.backgroundColor = 'black'

	var socket = io()

	var action = {
		msg: function(msg) {
			socket.emit('msg', msg)
		},
		kill: function() {
			socket.emit('kill')
		},
		status: function(cell) {
			socket.emit('status', mg.status.observe(cell))
		}
	}
	var rcv = {
		handShake: function(data) {
			socket.id = data.id
			socket.name = data.name
			console.log(`id:${socket.id}, name:${socket.name}`)
			mg.status.action(data.status)
			gameWindow.tick(gameWindow, mg.init, mg.tick)
		},
		msg: function(msg) {
			console.log(msg)
		},
		kill: function() {
			console.log('leaving server...')
			socket.destroy()
		},
		status: function(status) {
			mg.status.action(status)
		}
	}

	for (var i in rcv) {
		socket.on(i, rcv[i])
	}
	for (var i in action) {
		window[i] = action[i]
	}

	socket.emit('handShake', {
		name: prompt('What is your name?', 'Johnny Appleseed')
	})
</script>
